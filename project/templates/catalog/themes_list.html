{% extends "catalog/base.html" %}
{% load static %}

{% block title %}–°–ø–∏—Å–æ–∫ —Ç–µ–º{% endblock %}

{% block content %}
<div class="container mt-4">
    <h2>üìö –î–æ—Å—Ç—É–ø–Ω—ñ —Ç–µ–º–∏</h2>
    
    {% if themes %}
        <div class="row">
            {% for theme in themes %}
                <div class="col-md-6 col-lg-4 mb-4">
                    <div class="card h-100">
                        <div class="card-body">
                            <h5 class="card-title">{{ theme.theme }}</h5>
                            <p class="card-text">
                                {% if theme.teacher_id and theme.teacher_id.teacher_id %}
                                    <strong>–í–∏–∫–ª–∞–¥–∞—á:</strong> {{ theme.teacher_id.teacher_id.get_full_name }}<br>
                                    <strong>–ö–∞—Ñ–µ–¥—Ä–∞:</strong> {{ theme.teacher_id.teacher_id.department }}<br>
                                {% else %}
                                    <strong>–í–∏–∫–ª–∞–¥–∞—á:</strong> <span class="text-muted">–ù–µ –≤–∫–∞–∑–∞–Ω–æ</span><br>
                                {% endif %}
                                {% if theme.theme_description %}
                                    <strong>–û–ø–∏—Å:</strong> {{ theme.theme_description|truncatewords:20 }}
                                {% endif %}
                            </p>
                        </div>
                        <div class="card-footer">
                            {% if theme.teacher_id and theme.teacher_id.teacher_id and theme.teacher_id.teacher_id.id %}
                                <a href="{% url 'profile_detail' theme.teacher_id.teacher_id.id %}" 
                                   class="btn btn-primary btn-sm">
                                    –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –ø—Ä–æ—Ñ—ñ–ª—å –≤–∏–∫–ª–∞–¥–∞—á–∞
                                </a>
                            {% else %}
                                <span class="text-muted">–ü—Ä–æ—Ñ—ñ–ª—å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π</span>
                            {% endif %}
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
        
        <!-- –ü–∞–≥—ñ–Ω–∞—Ü—ñ—è -->
        {% if is_paginated %}
            <nav aria-label="Page navigation">
                <ul class="pagination justify-content-center">
                    {% if page_obj.has_previous %}
                        <li class="page-item">
                            <a class="page-link" href="?page=1">&laquo; –ü–µ—Ä—à–∞</a>
                        </li>
                        <li class="page-item">
                            <a class="page-link" href="?page={{ page_obj.previous_page_number }}">–ü–æ–ø–µ—Ä–µ–¥–Ω—è</a>
                        </li>
                    {% endif %}
                    
                    <li class="page-item active">
                        <span class="page-link">
                            –°—Ç–æ—Ä—ñ–Ω–∫–∞ {{ page_obj.number }} –∑ {{ page_obj.paginator.num_pages }}
                        </span>
                    </li>
                    
                    {% if page_obj.has_next %}
                        <li class="page-item">
                            <a class="page-link" href="?page={{ page_obj.next_page_number }}">–ù–∞—Å—Ç—É–ø–Ω–∞</a>
                        </li>
                        <li class="page-item">
                            <a class="page-link" href="?page={{ page_obj.paginator.num_pages }}">–û—Å—Ç–∞–Ω–Ω—è &raquo;</a>
                        </li>
                    {% endif %}
                </ul>
            </nav>
        {% endif %}
    {% else %}
        <div class="alert alert-info" role="alert">
            <h4 class="alert-heading">–¢–µ–º –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ</h4>
            <p>–ù–∞—Ä–∞–∑—ñ –Ω–µ–º–∞—î –¥–æ—Å—Ç—É–ø–Ω–∏—Ö —Ç–µ–º –¥–ª—è –ø–µ—Ä–µ–≥–ª—è–¥—É.</p>
        </div>
    {% endif %}
</div>
{% endblock %}
